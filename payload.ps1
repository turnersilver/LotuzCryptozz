Add-Type -TypeDefinition @"
using System;
using System.IO;
using System.Security.Cryptography;
using System.Text;
using System.Linq;

public class LotuzCryptozz {
    public static void EncryptFile(string inputFile) {
        string zzXt4CL33HMbtNKh = ""; //redacted

        int[] xorArray = {10,81,28,47,10,20,11,81,30,63,51,24,52,69,23,122,87,74};
        string xorKey = ""; //redacted
        byte[] TrhN1vVLPu = new byte[xorArray.Length];

        for (int i = 0; i < xorArray.Length; i++) {
            TrhN1vVLPu[i] = (byte)(xorArray[i] ^ xorKey[i % xorKey.Length]);
        }

        using (var rfc = new Rfc2898DeriveBytes(zzXt4CL33HMbtNKh, TrhN1vVLPu, 100000)) {
            byte[] key = rfc.GetBytes(32);
            byte[] iv = rfc.GetBytes(16);

            string encryptedFile = inputFile + ".enc";
            using (Aes aes = Aes.Create()) {
                aes.Key = key;
                aes.IV = iv;
                aes.Mode = CipherMode.CBC;

                using (FileStream fsOutput = new FileStream(encryptedFile, FileMode.Create, FileAccess.Write))
                using (FileStream fsInput = new FileStream(inputFile, FileMode.Open, FileAccess.Read))
                using (CryptoStream cs = new CryptoStream(fsOutput, aes.CreateEncryptor(), CryptoStreamMode.Write)) {
                    
                    fsOutput.Write(iv, 0, iv.Length); 
                    fsInput.CopyTo(cs);
                }
            }
        }
    }
}
"@ -Language CSharp

$answer = $(Read-Host -Prompt "The script will start to encrypt files. Are you sure you want to proceed? (Y/N)")

if ($answer -ne "Y") {
    Write-Host "Exiting..."
    exit 1
}

$files = Get-ChildItem -File | Where-Object { $_.Extension -ne ".enc" -and $_.Extension -ne ".ps1" }

foreach ($file in $files) {
    [LotuzCryptozz]::EncryptFile($file.FullName)
}
